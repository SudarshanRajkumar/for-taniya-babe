<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Taniya ğŸ’Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Quicksand:wght@400;500;600&family=Dancing+Script:wght@600&family=Caveat:wght@500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f3e8ff;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        .serif-font { font-family: 'Playfair Display', serif; }
        .script-font { font-family: 'Dancing Script', cursive; }
        .handwriting-font { font-family: 'Caveat', cursive; }
        
        /* Loader Styles - Guaranteed Visibility */
        #loading-screen {
            position: fixed;
            inset: 0;
            background-color: #f3e8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.8s ease-in-out;
        }
        .progress-bar-bg {
            width: 200px;
            height: 6px;
            background: rgba(167, 139, 250, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }
        .progress-bar-fill {
            width: 0%;
            height: 100%;
            background: #a78bfa;
            border-radius: 10px;
            transition: width 3.5s cubic-bezier(0.65, 0, 0.35, 1);
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); opacity: 0.2; }
            50% { transform: translateY(-20px) rotate(10deg); opacity: 0.4; }
            100% { transform: translateY(0px) rotate(0deg); opacity: 0.2; }
        }

        .sparkle {
            position: absolute;
            pointer-events: none;
            animation: float 5s ease-in-out infinite;
            z-index: 0;
        }

        .glass-card {
            background: rgba(255, 245, 245, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 2rem;
        }

        #explore-sidebar { transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .sidebar-open { transform: translateX(0) !important; }

        .envelope {
            position: relative;
            width: 320px;
            height: 200px;
            background: #d8b4fe;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .envelope::before {
            content: "";
            position: absolute;
            top: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 110px solid #e9d5ff;
            border-radius: 10px 10px 0 0;
        }
        .heart-seal {
            position: absolute;
            width: 45px;
            height: 45px;
            background: #fdf2f8;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 2;
        }

        .cassette { width: 100%; max-width: 480px; border-radius: 12px; padding: 12px; position: relative; box-shadow: 0 8px 20px rgba(0,0,0,0.05); margin-bottom: 24px; }
        .cassette-inner { background: #fdfcfd; border-radius: 8px; padding: 16px; text-align: center; border: 1px solid rgba(0,0,0,0.05); }

        /* Memory Game Stats Styling */
        .stat-box {
            background: white;
            padding: 1.5rem 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(167, 139, 250, 0.15);
            border: 2px solid #f3e8ff;
            min-width: 140px;
        }
        .memory-card {
            width: 80px;
            height: 100px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .memory-card.flipped { transform: rotateY(180deg); }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .card-front { background-color: #a78bfa; color: white; font-size: 1.8rem; font-weight: bold; }
        .card-back { background-color: #fff; transform: rotateY(180deg); font-size: 2.2rem; }

        .polaroid {
            background: white;
            padding: 10px 10px 40px 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-radius: 4px;
            transition: transform 0.3s ease;
            width: 200px;
        }
        .polaroid img { width: 100%; height: 180px; object-fit: cover; border-radius: 2px; }

        .hidden-section { display: none; opacity: 0; }
        .fade-in { animation: fadeIn 0.8s forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .romantic-deco {
            position: absolute;
            pointer-events: none;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.05));
        }

        @media (max-width: 640px) {
            .envelope { width: 260px; height: 160px; }
            .memory-card { width: 65px; height: 85px; }
            .polaroid { width: 160px; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6 relative">

    <!-- INITIAL LOADING SCREEN (Preparation) -->
    <div id="loading-screen">
        <div class="relative mb-6">
            <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHRraGZ3ZGR6Z2R6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/GeimqsH0TLDt4tScGw/giphy.gif" alt="Preparing Cat" class="w-32 h-32 md:w-40 md:h-40 object-contain">
            <div class="absolute -top-4 left-1/2 -translate-x-1/2 text-pink-400 text-3xl animate-bounce">â¤ï¸</div>
        </div>
        <h2 class="serif-font text-purple-600 text-3xl font-bold mb-2">Something Special âœ¨</h2>
        <p class="text-purple-400 text-sm font-medium italic">is being prepared for you... ğŸ’«</p>
        
        <div class="progress-bar-bg">
            <div id="loading-bar" class="progress-bar-fill"></div>
        </div>
        
        <div class="flex space-x-2 mt-6">
            <div class="w-2 h-2 bg-purple-300 rounded-full animate-pulse"></div>
            <div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse [animation-delay:0.2s]"></div>
            <div class="w-2 h-2 bg-purple-300 rounded-full animate-pulse [animation-delay:0.4s]"></div>
        </div>
    </div>

    <div id="sparkle-container"></div>

    <!-- Burger Menu Button -->
    <button onclick="toggleSidebar()" class="fixed top-6 right-6 w-12 h-12 flex flex-col justify-center items-center space-y-1.5 bg-white/50 backdrop-blur-md rounded-full z-[100] hover:bg-white/80 transition-all shadow-sm">
        <div class="w-6 h-0.5 bg-purple-500 rounded"></div>
        <div class="w-6 h-0.5 bg-purple-500 rounded"></div>
        <div class="w-6 h-0.5 bg-purple-500 rounded"></div>
    </button>

    <!-- RIGHT SIDEBAR (EXPLORE) -->
    <div id="explore-sidebar" class="fixed top-0 right-0 h-full w-80 bg-white shadow-2xl z-[95] transform translate-x-full flex flex-col p-8">
        <h2 class="serif-font italic text-purple-600 text-3xl mb-10 mt-12 text-center">Explore</h2>
        <div class="flex-1 space-y-4">
            <button onclick="showSection(1); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">âœ¨</span> <span>Start</span>
            </button>
            <button onclick="showSection(5); toggleSidebar();" class="w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-purple-400 to-purple-500 text-white font-medium shadow-md transition-transform hover:scale-[1.02]">
                <div class="flex items-center space-x-4"><span class="text-lg">ğŸ­</span> <span>Activities</span></div><span>â†’</span>
            </button>
            <button onclick="showSection(4); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">ğŸµ</span> <span>Chill Zone</span>
            </button>
            <button onclick="showSection(5); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">ğŸ§ </span> <span>Memory Game</span>
            </button>
            <button onclick="showSection(7); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">ğŸ“¸</span> <span>Moments</span>
            </button>
            <button onclick="showSection(8); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">ğŸ’–</span> <span>Why Special</span>
            </button>
            <button onclick="showSection(3); toggleSidebar();" class="w-full flex items-center space-x-4 p-4 rounded-2xl hover:bg-purple-50 transition-colors text-purple-600 font-medium border border-transparent hover:border-purple-100">
                <span class="text-lg">ğŸ’Œ</span> <span>Letter</span>
            </button>
        </div>
        <div class="bg-pink-50 p-6 rounded-3xl text-center"><p class="script-font text-pink-400 text-lg">Made with care for you ğŸ’</p></div>
    </div>

    <!-- 1. INTRO SCREEN -->
    <div id="section-1" class="text-center max-w-2xl w-full">
        <p class="script-font text-purple-400 text-2xl mb-4 italic">Hey, I made something for you... âœ¨</p>
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold leading-tight">See what I have made for <br> you ğŸ’Œ</h1>
        <div class="relative glass-card p-10 md:p-16 shadow-lg">
            <div class="absolute top-4 left-6 flex space-x-2"><div class="w-3 h-3 rounded-full bg-red-400"></div><div class="w-3 h-3 rounded-full bg-yellow-400"></div><div class="w-3 h-3 rounded-full bg-green-400"></div></div>

            <!-- Romantic Snail Decoration -->
            <div class="romantic-deco -top-12 -right-6 w-20 h-20">
                <svg viewBox="0 0 100 100" class="w-full h-full">
                    <path d="M20 70 Q 20 40 50 40 Q 80 40 80 70 Z" fill="#FFC0CB" /> 
                    <circle cx="50" cy="55" r="5" fill="#FF69B4" /> 
                    <path d="M15 75 Q 40 85 85 75" stroke="#F9A8D4" stroke-width="8" stroke-linecap="round" fill="none" /> 
                    <path d="M25 45 L 20 30 M35 45 L 35 25" stroke="#F9A8D4" stroke-width="2" /> 
                    <text x="12" y="25" font-size="12">â¤ï¸</text>
                    <text x="32" y="20" font-size="10">â¤ï¸</text>
                </svg>
            </div>

            <!-- Romantic Bunny Decoration -->
            <div class="romantic-deco -bottom-10 -left-10 w-24 h-24">
                <svg viewBox="0 0 100 100" class="w-full h-full">
                    <ellipse cx="50" cy="65" rx="25" ry="20" fill="#FFD1DC" />
                    <circle cx="70" cy="45" r="15" fill="#FFD1DC" />
                    <path d="M65 35 Q 60 10 55 35 M75 35 Q 80 10 85 35" fill="#FFD1DC" />
                    <circle cx="75" cy="45" r="2" fill="#333" />
                    <circle cx="30" cy="70" r="8" fill="#FFD1DC" />
                    <circle cx="70" cy="52" r="3" fill="#FF69B4" opacity="0.5" />
                </svg>
            </div>

            <div class="space-y-6">
                <p class="text-gray-500 text-lg font-medium">Just a few thoughts, and a little question at the end. ğŸ’«</p>
                <p class="text-purple-500 font-semibold text-lg">Tap below when you're ready ğŸ’–</p>
                <button onclick="showSection(2)" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-12 rounded-2xl shadow-md transition-all transform hover:scale-105 flex items-center mx-auto space-x-2">
                    <span>Open This ğŸ’</span> <span class="text-xl">â†’</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 2. ENVELOPE SCREEN (A LITTLE NOTE) -->
    <div id="section-2" class="hidden-section text-center max-w-5xl w-full">
        <p class="script-font text-purple-400 text-xl mb-2 italic">Just because it felt right âœ¨</p>
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold">A Little Note ğŸ’Œ</h1>
        <div class="glass-card p-12 md:p-24 shadow-xl flex flex-col items-center justify-center max-w-4xl mx-auto border-2 border-purple-50">
            <div class="envelope mb-12" onclick="showSection(3)">
                <div class="heart-seal text-2xl">â¤ï¸</div>
            </div>
            <div class="space-y-4">
                <p class="text-gray-400 text-sm font-medium">Click to open âœ¨</p>
                <button onclick="showSection(3)" class="bg-purple-100 text-purple-400 px-10 py-3 rounded-full text-sm font-bold border border-purple-200 shadow-sm hover:bg-purple-200 transition-all">
                    A Note For You ğŸ’–
                </button>
            </div>
        </div>
    </div>

    <!-- 3. LETTER CONTENT SCREEN (Taniya) -->
    <div id="section-3" class="hidden-section text-center max-w-5xl w-full">
        <p class="script-font text-purple-400 text-xl mb-2 italic">Just because it felt right âœ¨</p>
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold">A Little Note ğŸ’Œ</h1>
        <div class="glass-card p-10 md:p-16 shadow-2xl relative text-left max-w-4xl mx-auto overflow-visible border-2 border-white/50">
            <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3Z6c2xudGR6Z2R6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/06mX8IqV0MvS9P6V6E/giphy.gif" alt="Kitty" class="absolute -top-16 -right-12 w-40 h-40 transform rotate-12 drop-shadow-xl z-10 pointer-events-none">
            <div class="space-y-8">
                <h2 class="serif-font text-purple-600 text-4xl font-bold border-b-2 border-purple-100 pb-4">Hey Taniya ğŸ’–</h2>
                <div class="handwriting-font text-3xl text-gray-700 leading-relaxed italic space-y-6">
                    <p>I wanted to do something small today, simply because you matter to me. You show up with a calm kind of kindness that's easy to be around.</p>
                    <p>The way you listen, notice the little things, and stay genuine means a lot. ğŸŒ™ I don't know where this goes, and that's okay. I just wanted you to know I appreciate you, and I'm glad we have this connection. ğŸ¤</p>
                </div>
                <div class="flex justify-between items-end mt-12">
                    <span class="script-font text-purple-400 text-4xl">Always ğŸ’«</span>
                    <button onclick="showSection(4)" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-12 rounded-2xl shadow-lg transition-all transform hover:scale-105 flex items-center space-x-2">
                        <span>Keep Going âœ¨</span> <span class="text-xl">â†’</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 5. MEMORY MATCH -->
    <div id="section-5" class="hidden-section text-center max-w-4xl w-full py-10">
        <p class="script-font text-purple-400 text-2xl mb-2 italic text-center">A little fun break ğŸ’«</p>
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold text-center">Memory Match ğŸ’</h1>
        
        <div class="flex justify-center space-x-8 mb-12">
            <div class="stat-box">
                <p class="text-gray-400 text-xs uppercase font-bold tracking-widest mb-2">Moves</p>
                <p id="moves-count" class="text-purple-600 text-5xl font-black">0</p>
            </div>
            <div class="stat-box">
                <p class="text-gray-400 text-xs uppercase font-bold tracking-widest mb-2">Matched</p>
                <p id="matched-count" class="text-purple-600 text-5xl font-black">0/6</p>
            </div>
        </div>

        <div class="glass-card p-6 md:p-12 mb-8 max-w-3xl mx-auto shadow-2xl">
            <div id="memory-grid" class="grid grid-cols-3 sm:grid-cols-6 gap-4 justify-items-center"></div>
        </div>

        <div class="flex justify-center space-x-6">
            <button onclick="resetGame()" class="bg-purple-100 text-purple-500 font-bold py-4 px-12 rounded-2xl hover:bg-purple-200 transition-all shadow-sm">Reset</button>
            <button onclick="showSection(6)" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-12 rounded-2xl shadow-lg transition-all flex items-center space-x-2">
                <span>Next âœ¨</span> <span class="text-xl">â†’</span>
            </button>
        </div>
    </div>

    <!-- Sections 4, 6, 7, 8, 9 (Simplified logic containers for the flow) -->
    <div id="section-4" class="hidden-section text-center max-w-4xl w-full py-10">
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold">Songs That Feel Like Us ğŸµ</h1>
        <div class="flex flex-col items-center space-y-6">
            <div class="cassette bg-[#ffedd5] p-6 rounded-2xl w-full max-w-md"><h3 class="font-bold text-xl mb-4">Tum Ho Toh</h3><button class="bg-purple-500 text-white px-8 py-2 rounded-full shadow-lg">Play ğŸµ</button></div>
            <div class="cassette bg-[#f0fdf4] p-6 rounded-2xl w-full max-w-md"><h3 class="font-bold text-xl mb-4">Dooron Dooron</h3><button class="bg-purple-500 text-white px-8 py-2 rounded-full shadow-lg">Play ğŸµ</button></div>
        </div>
        <button onclick="showSection(5)" class="mt-12 bg-purple-500 text-white py-4 px-12 rounded-2xl">Play Game âœ¨ â†’</button>
    </div>

    <div id="section-6" class="hidden-section text-center max-w-5xl w-full py-10">
        <h1 class="serif-font text-purple-600 text-5xl mb-12 font-bold">Random Thoughts ğŸ’­</h1>
        <div class="flex flex-wrap justify-center gap-12 py-10">
            <div class="polaroid transform -rotate-6"><img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHRraGZ3ZGR6Z2R6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6ZGR6JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/MDJ9adwXYImm9OoQTx/giphy.gif" alt="Cat 1"><p class="mt-4 font-bold italic">Ok? ğŸ¥º</p></div>
        </div>
        <button onclick="showSection(7)" class="mt-12 bg-purple-500 text-white py-4 px-12 rounded-2xl">Next âœ¨ â†’</button>
    </div>

    <div id="section-7" class="hidden-section text-center max-w-4xl w-full py-10">
        <h1 class="serif-font text-purple-600 text-5xl mb-12 font-bold">Moments Together ğŸ¥</h1>
        <div class="glass-card p-6 shadow-2xl"><video id="moments-video" class="w-full rounded-2xl shadow-inner" controls><source src="LOVE FULL.mp4" type="video/mp4"></video></div>
        <button onclick="showSection(8)" class="mt-10 bg-purple-500 text-white py-4 px-12 rounded-2xl">Final Part âœ¨ â†’</button>
    </div>

    <div id="section-8" class="hidden-section text-center max-w-6xl w-full py-10">
        <h1 class="serif-font text-purple-600 text-6xl mb-12 font-bold">Why You Matter ğŸ’</h1>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-6">
            <div class="glass-card p-8 flex flex-col items-center"><h3 class="serif-font font-bold text-2xl text-purple-600 mb-4">Genuine Heart</h3><p class="text-gray-500 leading-relaxed">You care in ways that feel real and unforced</p></div>
            <div class="glass-card p-8 flex flex-col items-center"><h3 class="serif-font font-bold text-2xl text-purple-600 mb-4">Kind Nature</h3><p class="text-gray-500 leading-relaxed">Your kindness shows up naturally, without trying</p></div>
            <div class="glass-card p-8 flex flex-col items-center"><h3 class="serif-font font-bold text-2xl text-purple-600 mb-4">Just You</h3><p class="text-gray-500 leading-relaxed">Authentic, honest, and quietly special</p></div>
        </div>
        <button onclick="showSection(9)" class="mt-16 bg-purple-500 text-white py-4 px-16 rounded-2xl shadow-xl transform transition-all hover:scale-105">Grand Finale ğŸ’Œ</button>
    </div>

    <div id="section-9" class="hidden-section text-center max-w-5xl w-full py-10">
        <h1 class="serif-font text-purple-600 text-5xl md:text-7xl mb-12 font-bold">Will You? ğŸ’˜</h1>
        <div class="glass-card p-12 max-w-3xl mx-auto shadow-2xl border-2 border-purple-100 relative overflow-hidden">
            <h2 class="serif-font text-purple-600 text-4xl font-bold mb-8">Dear TaniyağŸ’–</h2>
            <p class="handwriting-font text-3xl text-gray-700 italic leading-relaxed mb-12">Will you be my Valentine? ğŸ’«</p>
            <div class="flex justify-center space-x-6 relative h-16">
                <button onclick="proposalResult(true)" class="bg-purple-500 hover:bg-purple-600 text-white px-12 py-3 rounded-full font-bold shadow-lg transform hover:scale-110">Yes</button>
                <button id="proposal-no" onmouseover="dodgeProposal(this)" class="bg-white text-gray-400 px-12 py-3 rounded-full font-bold border border-gray-100">No</button>
            </div>
            <div id="success-message" class="hidden absolute inset-0 bg-white/98 z-50 flex flex-col items-center justify-center text-center p-8">
                <div class="text-9xl mb-10 animate-bounce">ğŸ’–</div>
                <h2 class="serif-font text-purple-600 text-5xl font-bold leading-tight">I love you forever and ever</h2>
                <button onclick="location.reload()" class="mt-12 text-gray-400 underline">Start Over âœ¨</button>
            </div>
        </div>
    </div>

    <footer class="mt-20 text-purple-300 text-sm font-medium">Made with warmth, care, and a small spark âœ¨</footer>

    <script>
        // Start the loading bar and sparkles immediately
        (function init() {
            const container = document.getElementById('sparkle-container');
            const icons = ['âœ¨', 'ğŸ’–', 'ğŸ’œ', 'ğŸŒ¸'];
            for (let i = 0; i < 25; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle'; s.innerText = icons[Math.floor(Math.random() * icons.length)];
                s.style.left = Math.random() * 100 + 'vw'; s.style.top = Math.random() * 100 + 'vh';
                s.style.fontSize = (Math.random() * 1.5 + 0.5) + 'rem'; s.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(s);
            }

            // Loader animation
            const bar = document.getElementById('loading-bar');
            const loader = document.getElementById('loading-screen');
            setTimeout(() => { bar.style.width = '100%'; }, 50);
            
            // Fade out loader regardless of window.onload to prevent stuck screen
            setTimeout(() => {
                loader.style.opacity = '0';
                setTimeout(() => { loader.style.display = 'none'; }, 800);
            }, 3800);
        })();

        function showSection(num) {
            document.querySelectorAll('[id^="section-"]').forEach(s => { s.style.display = 'none'; s.classList.remove('fade-in'); });
            const target = document.getElementById('section-' + num);
            target.style.display = 'block'; setTimeout(() => target.classList.add('fade-in'), 10);
            const video = document.getElementById('moments-video');
            if (num !== 7 && video) video.pause();
            if(num === 5) resetGame();
        }

        function toggleSidebar() { document.getElementById('explore-sidebar').classList.toggle('sidebar-open'); }

        const emojis = ['ğŸ’–', 'â¤ï¸', 'ğŸŒ¹', 'ğŸ’˜', 'ğŸ’', 'ğŸ’Œ'];
        let cards = [...emojis, ...emojis], flippedCards = [], matchedPairs = 0, moves = 0;
        
        function shuffle(a) { for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]} return a; }
        
        function resetGame() {
            const grid = document.getElementById('memory-grid'); grid.innerHTML = ''; flippedCards = []; matchedPairs = 0; moves = 0;
            document.getElementById('moves-count').innerText = moves;
            document.getElementById('matched-count').innerText = '0/6';
            shuffle(cards).forEach(emoji => {
                const card = document.createElement('div'); card.className = 'memory-card';
                card.innerHTML = `<div class="card-front">?</div><div class="card-back">${emoji}</div>`;
                card.onclick = () => {
                    if (flippedCards.length < 2 && !card.classList.contains('flipped')) {
                        card.classList.add('flipped'); flippedCards.push(card);
                        if (flippedCards.length === 2) {
                            moves++; document.getElementById('moves-count').innerText = moves;
                            if (flippedCards[0].innerText === flippedCards[1].innerText) {
                                matchedPairs++; document.getElementById('matched-count').innerText = matchedPairs + '/6';
                                flippedCards = [];
                            } else { setTimeout(() => { flippedCards.forEach(c => c.classList.remove('flipped')); flippedCards = []; }, 800); }
                        }
                    }
                };
                grid.appendChild(card);
            });
        }

        function dodgeProposal(btn) {
            const x = Math.random() * 200 - 100;
            const y = Math.random() * 200 - 100;
            btn.style.position = 'relative';
            btn.style.transform = `translate(${x}px, ${y}px)`;
        }

        function proposalResult(isYes) {
            if (isYes) {
                const success = document.getElementById('success-message');
                success.classList.remove('hidden'); success.classList.add('fade-in');
                for(let i=0; i<60; i++) {
                    const p = document.createElement('div');
                    p.innerText = ['ğŸŒ¸', 'ğŸ’–', 'âœ¨', 'ğŸ’˜'][Math.floor(Math.random()*4)];
                    p.style.position = 'fixed';
                    p.style.left = '50%'; p.style.top = '50%';
                    p.style.fontSize = '1.5rem'; p.style.zIndex = '100';
                    p.style.transition = 'all 1.5s ease-out';
                    document.body.appendChild(p);
                    setTimeout(() => {
                        const angle = Math.random() * Math.PI * 2;
                        const dist = 200 + Math.random() * 400;
                        p.style.transform = `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) rotate(${Math.random()*720}deg)`;
                        p.style.opacity = '0';
                    }, 10);
                    setTimeout(() => p.remove(), 1500);
                }
            }
        }
        
        // Final fallback to ensure the site is interactive even if scripts load late
        document.addEventListener('DOMContentLoaded', () => {
            if(window.innerWidth < 640) document.body.style.fontSize = '14px';
        });
    </script>
</body>
</html>
